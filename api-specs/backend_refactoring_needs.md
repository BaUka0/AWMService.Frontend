# Планы по доработке Бэкенда (Refactoring Needs)

Для того чтобы убрать хардкод `departmentId`, `academicYearId` и `workTypeId` на фронтенде, необходимо реализовать следующие изменения на стороне API:

## 1. Автоматическое определение Кафедры (Department)
**Проблема:** Сейчас фронтенд сам передает `departmentId` в запросах на получение тем.
**Решение:** 
- Бэкенд должен извлекать `UserId` из JWT токена.
- На основе `UserId` бэкенд находит `DepartmentId` пользователя.
- Эндпоинты типа `GET /api/v1/topics/available` должны работать без обязательного параметра `departmentId`, подставляя его автоматически для текущего студента.

## 2. Глобальный Учебный Год (Active Academic Year)
**Проблема:** Фронтенд передает `academicYearId` во многих запросах.
**Решение:**
- В базе данных (таблица `AcademicYears`) добавить флаг `IsActive` или `IsCurrent`.
- Бэкенд должен по умолчанию фильтровать данные по активному году, если `academicYearId` не передан явно в запросе.

## 3. Обогащение данных пользователя (Profile/Settings)
**Варианты реализации:**
- **Вариант А:** Добавить `departmentId` и `currentAcademicYearId` в ответ `POST /api/v1/Auth/login`.
- **Вариант Б:** Реализовать эндпоинт `GET /api/v1/Users/me`, который возвращает полную информацию о профиле (ФИО, Кафедра, Группа, Текущий период обучения).

## 4. Справочник Типов Работ (WorkTypes)
**Проблема:** Типы работ сейчас захардкожены на фронтенде по ID (0, 1, 2...).
**Решение:**
- Создать эндпоинт `GET /api/v1/WorkTypes` (или аналогичный), чтобы фронтенд мог динамически сопоставлять ID и названия.
